# n8n Configuration

# Managed PostgreSQL credentials
n8n_db_creds: "{{ lookup('scaleway.scaleway.scaleway_secret', 'postgres-n8n-credentials') | b64decode | from_json }}"

# Application settings
n8n_base_url: "https://n8n.{{ management_domain }}"

# Encryption key for credentials
n8n_encryption_key: "{{ lookup('scaleway.scaleway.scaleway_secret', 'n8n-encryption-key') | b64decode }}"

# OIDC Authentication (Authentik)
n8n_authentik_creds: "{{ lookup('scaleway.scaleway.scaleway_secret', 'authentik-app-n8n') | b64decode | from_json }}"

# OIDC credentials structure for env template
n8n_oidc_creds:
  issuer_url: "https://{{ gateway_domain }}/application/o/n8n/"
  client_id: "{{ n8n_authentik_creds.client_id }}"
  client_secret: "{{ n8n_authentik_creds.client_secret }}"

# Proton Mail Bridge integration
# Enable to connect n8n to the protonmail Docker network for IMAP/SMTP access
# Requires protonmail-bridge role to be deployed first
enable_protonmail: true






