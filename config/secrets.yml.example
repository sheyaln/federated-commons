# Infrastructure Secrets Configuration

# This file defines secrets that are stored in Scaleway Secret Manager.
# Terraform reads this file to create the secret resources.
#
# COPY THIS FILE: cp secrets.yml.example secrets.yml
# Then customize for your deployment.
#
# IMPORTANT: This file only defines secret METADATA (names, paths, types).
# Actual secret VALUES are NEVER stored in this file or in git.


# Secret Types Reference
# opaque        - Single value secrets (passwords, API keys, tokens)
# key_value     - JSON object with multiple key-value pairs
# ssh_key       - SSH private keys
# basic_credentials - Username/password pairs
#
# Properties:
#   name        - Name in Scaleway Secret Manager (required)
#   description - Human-readable description (required)
#   path        - Path in Secret Manager for organization (required)
#   type        - One of: opaque, key_value, ssh_key, basic_credentials (required)
#   generate    - If true, Terraform auto-generates the value (optional, default: false)
#   length      - Length for generated secrets (optional, default: 32)
#   tags        - Additional tags beyond the category (optional)

secrets:
  # Identity & Authentication

  authentik:
    - name: "authentik-api-key"
      description: "Authentik API key for Terraform/Ansible automation"
      
      type: "opaque"
      # Manual: Get from Authentik Admin > Directory > Tokens
    
    - name: "authentik-secret-key"
      description: "Authentik secret key for session signing"
      
      type: "opaque"
      generate: true
    
    - name: "authentik-admin-password"
      description: "Authentik admin (akadmin) password"
      
      type: "opaque"
      generate: true

  social_logins:
    - name: "social-google-oauth-credentials"
      description: "Google OAuth client ID and secret"
      
      type: "key_value"
      # Manual: Get from Google Cloud Console > APIs & Services > Credentials
      # Format: {"client_id": "...", "client_secret": "..."}
    
    - name: "social-apple-oauth-credentials"
      description: "Apple OAuth credentials for Sign in with Apple"
      
      type: "key_value"
      # Manual: Get from Apple Developer Portal
      # Format: {"client_id": "...", "team_id": "...", "key_id": "...", "private_key": "..."}

  # Communication & Email

  smtp:
    - name: "smtp-config"
      description: "SMTP server configuration for sending emails"
      
      type: "key_value"
      # Manual: Get from your email provider
      # Format: {"host": "...", "port": 587, "username": "...", "password": "..."}

  email_bridge:
    - name: "email-bridge-credentials"
      description: "Email bridge credentials (e.g. ProtonMail Bridge, hydroxide)"
      
      type: "key_value"
      # Manual: Get from your email bridge application
    
    - name: "email-bridge-gpg-key"
      description: "Email bridge GPG key for encryption"
      
      type: "opaque"

  slack:
    - name: "slack-client-id"
      description: "Slack OAuth app client ID"
      
      type: "opaque"
      # Manual: Get from Slack App settings
    
    - name: "slack-client-secret"
      description: "Slack OAuth app client secret"
      
      type: "opaque"
    
    - name: "slack-signing-secret"
      description: "Slack app signing secret for webhook verification"
      
      type: "opaque"
    
    - name: "slack-bot-token"
      description: "Slack bot user OAuth token (xoxb-...)"
      
      type: "opaque"

  # Application Secrets - Production Tools

  nextcloud:
    - name: "nextcloud-admin-password"
      description: "Nextcloud admin user password"
      
      type: "opaque"
      generate: true
    
    - name: "nextcloud-redis-password"
      description: "Redis password for Nextcloud caching"
      
      type: "opaque"
      generate: true

  nextcloud_talk:
    - name: "nextcloud-talk-turn-secret"
      description: "TURN server shared secret for Nextcloud Talk"
      
      type: "opaque"
      generate: true
    
    - name: "nextcloud-talk-signaling-secret"
      description: "Signaling server shared secret"
      
      type: "opaque"
      generate: true
    
    - name: "nextcloud-talk-internal-secret"
      description: "Internal service communication secret"
      
      type: "opaque"
      generate: true

  onlyoffice:
    - name: "onlyoffice-db-password"
      description: "OnlyOffice PostgreSQL database password"
      
      type: "opaque"
      generate: true
    
    - name: "onlyoffice-redis-password"
      description: "OnlyOffice Redis password"
      
      type: "opaque"
      generate: true
    
    - name: "onlyoffice-rabbitmq-password"
      description: "OnlyOffice RabbitMQ password"
      
      type: "opaque"
      generate: true
    
    - name: "onlyoffice-jwt-secret"
      description: "JWT secret for OnlyOffice authentication"
      
      type: "opaque"
      generate: true
    
    - name: "onlyoffice-secure-link-secret"
      description: "Secure link secret for file downloads"
      
      type: "opaque"
      generate: true

  outline:
    - name: "outline-secret-key"
      description: "Outline application secret key"
      
      type: "opaque"
      generate: true
    
    - name: "outline-utils-secret-key"
      description: "Outline utils service secret key"
      
      type: "opaque"
      generate: true
    
    # Slack integration for Outline (if using Slack for auth/notifications)
    - name: "outline-slack-client-id"
      description: "Slack client ID for Outline integration"
      
      type: "opaque"
    
    - name: "outline-slack-client-secret"
      description: "Slack client secret for Outline"
      
      type: "opaque"
    
    - name: "outline-slack-signing-secret"
      description: "Slack signing secret for Outline webhooks"
      
      type: "opaque"
    
    - name: "outline-slack-bot-token"
      description: "Slack bot token for Outline"
      
      type: "opaque"

  decidim:
    - name: "decidim-secret-key-base"
      description: "Rails secret key base for Decidim"
      
      type: "opaque"
      generate: true
    
    - name: "decidim-default-admin-password"
      description: "Default admin password for Decidim"
      
      type: "opaque"
      generate: true

  espocrm:
    - name: "espocrm-admin-password"
      description: "EspoCRM admin password"
      
      type: "opaque"
      generate: true

  n8n:
    - name: "n8n-encryption-key"
      description: "N8N credentials encryption key"
      
      type: "opaque"
      generate: true
    
    - name: "n8n-db-password"
      description: "N8N database password"
      
      type: "opaque"
      generate: true

  # Management & Monitoring

  grafana:
    - name: "grafana-admin-credentials"
      description: "Grafana admin username and password"
      
      type: "basic_credentials"
      # Manual: Set during initial Grafana setup
    
    - name: "grafana-terraform-api-token"
      description: "Grafana API token for Terraform automation"
      
      type: "opaque"
      # Manual: Create in Grafana Admin > API Keys

  wazuh:
    - name: "wazuh-api-credentials"
      description: "Wazuh API username and password"
      
      type: "basic_credentials"
      generate: true
    
    - name: "wazuh-indexer-admin-password"
      description: "OpenSearch admin password for Wazuh"
      
      type: "opaque"
      generate: true

  wobbler:
    - name: "wobbler-ssh-key"
      description: "SSH private key for Wobbler server access"
      
      type: "ssh_key"
      # Manual: Generate with: ssh-keygen -t ed25519 -C "wobbler@example.org"
    
    - name: "wobbler-ssh-public-key"
      description: "SSH public key for Wobbler (deploy to targets)"
      
      type: "opaque"
      # Manual: Contents of the .pub file

  # Cloud Provider Credentials

  scaleway:
    - name: "scw-ansible-access-key"
      description: "Scaleway access key for Ansible secret lookups"
      
      type: "opaque"
      # Manual: Create in Scaleway Console > IAM
    
    - name: "scw-ansible-secret-key"
      description: "Scaleway secret key for Ansible"
      
      type: "opaque"
    
    - name: "scw-s3-access-key"
      description: "Scaleway S3 access key for object storage"
      
      type: "opaque"
    
    - name: "scw-s3-secret-key"
      description: "Scaleway S3 secret key"
      
      type: "opaque"
